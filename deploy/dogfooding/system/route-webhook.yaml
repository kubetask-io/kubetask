# Copyright Contributors to the KubeOpenCode project
# Apply separately: kubectl apply -f route-webhook.yaml
#
# This route exposes the Argo Events EventSource service for GitHub webhooks.
# Previously this pointed to the KubeOpenCode webhook server, now migrated to Argo Events.
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: github-eventsource
  namespace: kubeopencode-system
  labels:
    app.kubernetes.io/component: eventsource
    app.kubernetes.io/name: argo-events
spec:
  # host: auto-generated by OpenShift if not specified
  to:
    kind: Service
    name: github-eventsource-svc
    weight: 100
  port:
    targetPort: 12000
  tls:
    termination: edge
    insecureEdgeTerminationPolicy: Redirect
  wildcardPolicy: None
