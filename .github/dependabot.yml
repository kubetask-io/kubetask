version: 2
updates:
  # Dependabot automatically runs `go mod tidy` and `go mod vendor` when vendor directory exists
  # See: https://github.blog/changelog/2020-10-19-dependabot-go-mod-tidy-and-vendor-support/
  - package-ecosystem: "gomod"
    directory: "/"
    schedule:
      interval: "weekly"
    # Limit to 1 open PR at a time since we use AI to auto-review and merge these PRs sequentially
    open-pull-requests-limit: 1
    # Group all Go dependencies into a single PR for easier review and merging
    groups:
      go-dependencies:
        patterns:
          - "*"

  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"

  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "weekly"

  - package-ecosystem: "docker"
    directory: "/agents/opencode"
    schedule:
      interval: "weekly"

  - package-ecosystem: "docker"
    directory: "/agents/devbox"
    schedule:
      interval: "weekly"

  - package-ecosystem: "helm"
    directory: "/charts/kubeopencode"
    schedule:
      interval: "weekly"
